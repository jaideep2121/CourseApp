{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/JASWINDER/Desktop/fully megaproject by me/studynotion8/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/JASWINDER/Desktop/fully megaproject by me/studynotion8/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/JASWINDER/Desktop/fully megaproject by me/studynotion8/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{toast}from\"react-hot-toast\";import{setLoading,setUser}from\"../../slices/profileSlice\";import{apiConnector}from\"../apiconnector\";import{profileEndpoints}from\"../apis\";import{logout}from\"./authAPI\";var GET_USER_DETAILS_API=profileEndpoints.GET_USER_DETAILS_API,GET_USER_ENROLLED_COURSES_API=profileEndpoints.GET_USER_ENROLLED_COURSES_API;export function getUserDetails(token,navigate){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var toastId,response,userImage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:toastId=toast.loading(\"Loading...\");dispatch(setLoading(true));_context.prev=2;_context.next=5;return apiConnector(\"GET\",GET_USER_DETAILS_API,null,{Authorization:\"Bearer \".concat(token)});case 5:response=_context.sent;console.log(\"GET_USER_DETAILS API RESPONSE............\",response);if(response.data.success){_context.next=9;break;}throw new Error(response.data.message);case 9:userImage=response.data.data.image?response.data.data.image:\"https://api.dicebear.com/5.x/initials/svg?seed=\".concat(response.data.data.firstName,\" \").concat(response.data.data.lastName);dispatch(setUser(_objectSpread(_objectSpread({},response.data.data),{},{image:userImage})));_context.next=18;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);dispatch(logout(navigate));console.log(\"GET_USER_DETAILS API ERROR............\",_context.t0);toast.error(\"Could Not Get User Details\");case 18:toast.dismiss(toastId);dispatch(setLoading(false));case 20:case\"end\":return _context.stop();}},_callee,null,[[2,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();}export function getUserEnrolledCourses(_x2){return _getUserEnrolledCourses.apply(this,arguments);}function _getUserEnrolledCourses(){_getUserEnrolledCourses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token){var toastId,result,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:toastId=toast.loading(\"Loading...\");result=[];_context2.prev=2;console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");_context2.next=6;return apiConnector(\"GET\",GET_USER_ENROLLED_COURSES_API,null,{Authorisation:\"Bearer \".concat(token)});case 6:response=_context2.sent;console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");// console.log(\n//   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n//   response\n// )\nif(response.data.success){_context2.next=10;break;}throw new Error(response.data.message);case 10:result=response.data.data;_context2.next=17;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\",_context2.t0);toast.error(\"Could Not Get Enrolled Courses\");case 17:toast.dismiss(toastId);return _context2.abrupt(\"return\",result);case 19:case\"end\":return _context2.stop();}},_callee2,null,[[2,13]]);}));return _getUserEnrolledCourses.apply(this,arguments);}","map":{"version":3,"names":["toast","setLoading","setUser","apiConnector","profileEndpoints","logout","GET_USER_DETAILS_API","GET_USER_ENROLLED_COURSES_API","getUserDetails","token","navigate","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","toastId","response","userImage","wrap","_callee$","_context","prev","next","loading","Authorization","concat","sent","console","log","data","success","Error","message","image","firstName","lastName","_objectSpread","t0","error","dismiss","stop","_x","apply","arguments","getUserEnrolledCourses","_x2","_getUserEnrolledCourses","_callee2","result","_callee2$","_context2","Authorisation","abrupt"],"sources":["C:/Users/JASWINDER/Desktop/fully megaproject by me/studynotion8/src/services/operations/profileAPI.js"],"sourcesContent":["import { toast } from \"react-hot-toast\"\n\nimport { setLoading, setUser } from \"../../slices/profileSlice\"\nimport { apiConnector } from \"../apiconnector\"\nimport { profileEndpoints } from \"../apis\"\nimport { logout } from \"./authAPI\"\n\nconst { GET_USER_DETAILS_API, GET_USER_ENROLLED_COURSES_API } = profileEndpoints\n\nexport function getUserDetails(token, navigate) {\n  return async (dispatch) => {\n    const toastId = toast.loading(\"Loading...\")\n    dispatch(setLoading(true))\n    try {\n      const response = await apiConnector(\"GET\", GET_USER_DETAILS_API, null, {\n        Authorization: `Bearer ${token}`,\n      })\n      console.log(\"GET_USER_DETAILS API RESPONSE............\", response)\n\n      if (!response.data.success) {\n        throw new Error(response.data.message)\n      }\n      const userImage = response.data.data.image\n        ? response.data.data.image\n        : `https://api.dicebear.com/5.x/initials/svg?seed=${response.data.data.firstName} ${response.data.data.lastName}`\n      dispatch(setUser({ ...response.data.data, image: userImage }))\n    } catch (error) {\n      dispatch(logout(navigate))\n      console.log(\"GET_USER_DETAILS API ERROR............\", error)\n      toast.error(\"Could Not Get User Details\")\n    }\n    toast.dismiss(toastId)\n    dispatch(setLoading(false))\n  }\n}\n\nexport async function getUserEnrolledCourses(token) {\n  const toastId = toast.loading(\"Loading...\")\n  let result = []\n  try {\n    console.log(\"BEFORE Calling BACKEND API FOR ENROLLED COURSES\");\n    const response = await apiConnector(\n      \"GET\",\n      GET_USER_ENROLLED_COURSES_API,\n      null,\n      {\n        Authorisation: `Bearer ${token}`,\n      }\n    )\n    console.log(\"AFTER Calling BACKEND API FOR ENROLLED COURSES\");\n    // console.log(\n    //   \"GET_USER_ENROLLED_COURSES_API API RESPONSE............\",\n    //   response\n    // )\n\n    if (!response.data.success) {\n      throw new Error(response.data.message)\n    }\n    result = response.data.data\n  } catch (error) {\n    console.log(\"GET_USER_ENROLLED_COURSES_API API ERROR............\", error)\n    toast.error(\"Could Not Get Enrolled Courses\")\n  }\n  toast.dismiss(toastId)\n  return result\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}